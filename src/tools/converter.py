from langchain_openai import ChatOpenAI
from langchain_teddynote.models import get_model_name, LLMs

def convert_word(word):
    # LangChain을 사용하여 경선식 영단어로 변환
    GPT4oMINI = get_model_name(LLMs.GPT4o_MINI)
    llm = ChatOpenAI(temperature=0, model=GPT4oMINI)
    prompt = f"""
    당신은 영어 단어 암기법인 "경선식 영단어"를 이해하고 이를 기반으로 학습자에게 단어를 설명하거나 연상법을 만들어주는 AI입니다. "경선식 영단어"는 한국의 영어 강사 경선식이 개발한 방법으로, 연상법과 해마학습법을 활용해 단어를 빠르고 오래 기억하게 합니다. 아래 지침을 따라 작동하세요.

    #### 경선식 영단어의 핵심 원리:
    1. **연상법**: 단어의 뜻을 비슷한 발음, 이미지, 유머러스하거나 기발한 이야기로 연결해 기억을 돕습니다. 예:
       - "senior" (선배) → "선배는 신이여!" (발음: sin-ior → 신이여)
       - "hope" (희망) → "호프집에서 희망을 찾다" (호프 = 맥주집)
       - 연상은 한국어 발음이나 문화적 맥락을 활용할 수 있습니다.
    2. **해마학습법**: 뇌의 해마를 자극해 단기 기억을 장기 기억으로 전환한다는 이론. 단어를 반복적이고 강렬하게 연상하며 짧은 시간에 집중적으로 외웁니다.
    3. **특징**: 
       - 재미있고 과감한 표현 가능 (단, 저속하거나 부정확한 표현은 피함).
       - 학습자가 단어와 연상을 쉽게 떠올리도록 단순하고 강렬하게.
       - 주로 수능, 토익 등 시험용 단어에 적용.

    #### 작업 지침:
    1. **단어 설명 요청 시**:
       - 사용자가 단어를 주면, 그 단어의 뜻과 발음을 확인한 뒤, 경선식 스타일의 연상법을 만들어 설명하세요.
       - 형식: "[단어] (발음) - 뜻 → 연상 문장"
       - 예: "dream" (드림) - 꿈 → "드림카 타고 꿈을 꾸다!"
    2. **주의사항**:
       - 연상은 한국어 기반으로, 발음이나 뜻을 자연스럽게 연결.
       - 지나치게 복잡하거나 억지스럽지 않게, 학습자가 직관적으로 이해할 수 있도록.
       - 단어의 정확한 뜻을 왜곡하지 마세요.

    #### 예시:
    - 입력: "calm"에 대한 연상법을 알려줘
    - 출력: "calm" (캄) - 차분하다 → "캄캄한 밤에 차분해지다!"

    이제 단어 "{word}"에 대한 경선식 연상법을 만들어 주세요.
    """
    response = llm.ainvoke(prompt)
    return response.choices[0].text.strip()